<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쿠팡 통합 도구</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>쿠팡 통합 도구</h1>
            <select id="toolSelector">
                <option value="product">상품 추출</option>
                <option value="review">리뷰 수집</option>
                <option value="download">이미지 다운</option>
            </select>
        </header>
        
        <div class="status" id="status">
            <span id="statusText">도구를 선택하세요...</span>
        </div>
        
        <!-- 상품 정보 추출 섹션 -->
        <div id="productSection" class="tool-section active">
            <div class="search-container">
                <div class="search-header">
                    <span class="search-subtitle">쿠팡 파트너스 활동의 일환으로, 이에 따른 일정액의 수수료를 제공받습니다.</span>
                </div>
                <div class="iframe-container">
                    <iframe src="https://coupa.ng/cjvL3k" width="100%" height="75" frameborder="0" scrolling="no" referrerpolicy="unsafe-url"></iframe>
                </div>
            </div>
            
            <div class="controls">
                <button id="extractBtn" class="primary-btn">정보 추출</button>
                <button id="exportBtn" class="secondary-btn" disabled>JSON 내보내기</button>
                <button id="exportCsvBtn" class="secondary-btn" disabled>CSV 내보내기</button>
                <button id="copyBtn" class="secondary-btn" disabled>클립보드 복사</button>
            </div>
            
            <div class="results-container">
                <div class="results-header">
                    <span id="productCount">0개 상품</span>
                    <span id="lastUpdated"></span>
                </div>
                
                <div id="productList" class="product-list">
                    <div class="empty-state">
                        <p>추출된 상품이 없습니다.</p>
                        <p>쿠팡 상품 페이지에서 "정보 추출" 버튼을 클릭하세요.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 리뷰 수집 섹션 -->
        <div id="reviewSection" class="tool-section">
            <div class="controls">
                <div class="input-group">
                    <label for="pageCount">수집할 페이지 수:</label>
                    <input type="number" id="pageCount" value="3" min="1" max="10">
                </div>
                <button id="scrapeBtn" class="primary-btn">리뷰 수집 시작</button>
            </div>
            
            <div class="review-info">
                <p>현재 페이지에서 리뷰를 수집합니다.</p>
                <p>쿠팡 상품 상세 페이지에서 사용하세요.</p>
            </div>
        </div>

        <!-- 이미지 다운로드 섹션 -->
        <div id="downloadSection" class="tool-section">
            <div class="file-input-container">
                <label for="jsonFile" class="file-label">JSON 파일 선택:</label>
                <input type="file" id="jsonFile" accept=".json" class="file-input">
                <div id="fileInfo" class="file-info">파일을 선택해주세요</div>
            </div>
            
            <div class="input-group">
                <label for="downloadFolder">다운로드 폴더명:</label>
                <input type="text" id="downloadFolder" placeholder="downloaded_images" value="downloaded_images">
            </div>
            
            <div class="input-group">
                <label for="maxDownloads">최대 다운로드 수 (0: 전체):</label>
                <input type="number" id="maxDownloads" value="0" min="0">
            </div>
            
            <div class="controls">
                <button id="analyzeBtn" class="secondary-btn">JSON 분석</button>
                <button id="downloadBtn" class="primary-btn" disabled>다운로드 시작</button>
                <button id="stopBtn" class="danger-btn" disabled>중지</button>
            </div>
            
            <div id="analysisInfo" class="analysis-info"></div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progressBar" class="progress-fill"></div>
                </div>
                <div id="progressText" class="progress-text">대기 중...</div>
            </div>
            
            <div class="log-container">
                <div class="log-header">
                    <span>로그</span>
                    <button id="clearLogBtn" class="clear-log-btn">지우기</button>
                </div>
                <div id="logArea" class="log-area"></div>
            </div>
        </div>

        <div class="controls footer-controls">
            <button id="clearBtn" class="danger-btn">기록 지우기</button>
        </div>
    </div>
    
    <script src="popup.js"></script>
</body>
</html>